(()=>{var e={254:function(e,t,n){var r;/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */e=n.nmd(e),function(o){var i=t,s=(e&&e.exports,"object"==typeof n.g&&n.g);s.global!==s&&s.window;var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var c=function(e){throw new a(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,f={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,o,i=e.length%3,s="",a=-1,l=e.length-i;++a<l;)t=e.charCodeAt(a)<<16,n=e.charCodeAt(++a)<<8,r=e.charCodeAt(++a),s+=u.charAt((o=t+n+r)>>18&63)+u.charAt(o>>12&63)+u.charAt(o>>6&63)+u.charAt(63&o);return 2==i?(t=e.charCodeAt(a)<<8,n=e.charCodeAt(++a),s+=u.charAt((o=t+n)>>10)+u.charAt(o>>4&63)+u.charAt(o<<2&63)+"="):1==i&&(o=e.charCodeAt(a),s+=u.charAt(o>>2)+u.charAt(o<<4&63)+"=="),s},decode:function(e){var t=(e=String(e).replace(l,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,o=0,i="",s=-1;++s<t;)r=u.indexOf(e.charAt(s)),n=o%4?64*n+r:r,o++%4&&(i+=String.fromCharCode(255&n>>(-2*o&6)));return i},version:"1.0.0"};void 0===(r=function(){return f}.call(t,n,t,e))||(e.exports=r)}()},184:e=>{var t,n,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var a,c=[],u=!1,l=-1;function f(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&d())}function d(){if(!u){var e=s(f);u=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";class e{constructor(t){var n=this;this.log=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.impl.log(n.serviceName,...t)},this.info=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.impl.info(n.serviceName,...t)},this.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.impl.warn(n.serviceName,...t)},this.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.impl.error(n.serviceName,...t)},this.switchToRealtime=()=>{this.impl=console},this.serviceName=void 0,this.impl=void 0,this.serviceName=t,e.instances.push(this),this.impl=e.queueImpl}static switchAllToRealtime(){e.queueImpl.drain(console),e.instances.forEach((e=>e.switchToRealtime()))}}e.instances=[],e.queueImpl=new class{constructor(){this.queue=[]}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.queue.push({type:"log",args:t})}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.queue.push({type:"info",args:t})}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.queue.push({type:"warn",args:t})}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.queue.push({type:"error",args:t})}drain(e){this.queue.forEach((t=>{let{type:n,args:r}=t;e[n](...r)})),this.queue=[]}};const t=t=>{const{ctrlKey:n,shiftKey:o,metaKey:i,altKey:s,keyCode:a}=t;[n||i,s,o,76===a].every(Boolean)&&(e.switchAllToRealtime(),r())},r=()=>window.removeEventListener("keydown",t,!1);class o{constructor(t,n){void 0===n&&(n=new e("WindowMessenger")),this.targetWindow=void 0,this.handlerDescriptions=[],this.logger=void 0,this.logger=n,this.targetWindow=t,window.addEventListener("message",this.handleMessage.bind(this),!1)}setTarget(e){this.targetWindow=e}on(e,t){this.handlerDescriptions.push({event:e,fn:t,once:!1})}one(e,t){this.handlerDescriptions.push({event:e,fn:t,once:!0})}off(e,t){this.handlerDescriptions=this.handlerDescriptions.filter((n=>!(n.event===e&&(n.fn===t||!t))))}emit(e,t){if(void 0===t&&(t=null),this.logger.log("postMessage emitted",e,t),!this.targetWindow)throw new Error("target window should be defined");this.targetWindow.postMessage(JSON.stringify({data:t,event:e}),"*")}handleMessage(e){if(e.source!==this.targetWindow)return;const t=this.parseMessageData(e.data);null!==t&&(this.logger.log("postMessage received",t),this.handlerDescriptions.filter((e=>e.event===t.event)).forEach(this.runObserver(e,t.data)))}runObserver(e,t){return n=>{n.fn.call(e,t),n.once&&this.off(n.event,n.fn)}}parseMessageData(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(e){return null}}}var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};function c(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}Object.create;function l(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;"function"==typeof SuppressedError&&SuppressedError;var f;!function(e){e.Default="",e.OwnerAccount="owner-account"}(f||(f={}));var d="__WIXEXP_USE_NEW_API",h="__WIXEXP_CONDUCTION_METHOD_",p="__WIXEXP_OWNER_ACCOUNT_ID_",g="__WIXEXP_LOGGED_IN_USER_ID_";function m(e,t,n){var r,o;if("undefined"!=typeof self)if("function"==typeof n){if(void 0!==n(self[t]))return(r={})[e]=n(self[t]),r}else if(typeof self[t]===n)return(o={})[e]=self[t],o;return{}}var y=function(e){return Object.keys(f).filter((function(t){return f[t]===e})).length>0?e:void 0};function v(e){return function(e){return e.conductionMethod===f.OwnerAccount&&e.siteOwnerId&&e.loggedInUserId}(e)?{forSiteOwner:{siteOwnerId:e.siteOwnerId,loggedInUserId:e.loggedInUserId}}:{}}var w=function(e){return"string"==typeof e&&""!==e};function b(e){void 0===e&&(e={});var t=e.forSiteOwner,n=e.forSiteVisitors,r=e.overrideCriteria,o="";if(["forSiteOwner","forSiteVisitors"].reduce((function(t,n){return e[n]?t+1:t}),0)>1)throw new Error('Only one of "forSiteOwner" or "forSiteVisitors" is accepted.');return t&&(o+=function(e){return w(e.loggedInUserId)&&w(e.siteOwnerId)?"&"+"requestContext.forSiteOwner.loggedInUserId=".concat(e.loggedInUserId,"&")+"requestContext.forSiteOwner.siteOwnerId=".concat(e.siteOwnerId):""}(t)),n&&(o+=function(e){return w(e.visitorId)&&w(e.siteOwnerId)?"&"+"requestContext.forSiteVisitors.visitorId=".concat(e.visitorId,"&")+"requestContext.forSiteVisitors.siteOwnerId=".concat(e.siteOwnerId):""}(n)),r&&(o+=function(e){return w(e.entityId)?"&requestContext.overrideCriteria.entityId=".concat(e.entityId):""}(r)),o}function I(e){if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e}var x={conductAllInScope:"/_api/wix-laboratory-server/v1/laboratory/platform/conductAllInScope",conductExperiment:"/_api/wix-laboratory-server/v1/laboratory/platform/conductExperiment"},O={conductAllInScope:"/_api/wix-laboratory-server/laboratory/conductAllInScope",conductExperiment:"/_api/wix-laboratory-server/laboratory/conductExperiment"};function C(e,t){return-1!==e.indexOf(t?x.conductAllInScope:O.conductAllInScope)}var _=function(e,t,n){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=!1),n?"".concat(x.conductExperiment,"?key=").concat(encodeURIComponent(e),"&fallbackValue=").concat(encodeURIComponent(t)):"".concat(O.conductExperiment,"?key=").concat(encodeURIComponent(e),"&fallback=").concat(encodeURIComponent(t))};function E(e,t,n){var r="".concat(_(t,"",n));return e.includes(r)}var S=function(){function e(){this.urlMap=new Map,this.pendingUrlMap=new Map}return e.prototype.addUrlRequest=function(e,t){return c(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return this.pendingUrlMap.set(e,t),[4,t.then((function(t){return n.addUrlResponse(e,t)}))];case 1:return r.sent(),[2]}}))}))},e.prototype.addUrlResponse=function(e,t){this.urlMap.set(e,t)},e.prototype.getUrlResponse=function(e){return this.urlMap.get(e)},e.prototype.getUrlRequest=function(e){return this.pendingUrlMap.get(e)},e.prototype.getExperimentValue=function(e,t){var n,r;try{for(var o=l(this.urlMap.keys()),i=o.next();!i.done;i=o.next()){var s=i.value;if(E(s,e,t))return this.urlMap.get(s);if(C(s,t)){var a=I(this.urlMap.get(s));if("object"==typeof a&&e in a)return a[e]}}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e}();!function(){function e(){}e.prototype.addUrlRequest=function(){},e.prototype.addUrlResponse=function(){},e.prototype.getUrlResponse=function(){},e.prototype.getUrlRequest=function(){},e.prototype.getExperimentValue=function(){}}();function A(){return void 0===self.experimentsCacheV2&&(self.experimentsCacheV2=new S),self.experimentsCacheV2}function M(){return"object"==typeof self?self:n.g}function T(e){const t=function(e){return function(){const e=function(){if("object"==typeof document)return document}();if(e&&e.cookie)return decodeURIComponent(e.cookie).split(";");return[]}().filter((t=>e===t.split("=")[0].trim()))[0]}(e);return t?t.split("=")[1]:""}const P="XSRF-TOKEN",U="x-xsrf-token";const N="x-wix-brand";function R(){const e=function(){const e=M();if(e&&e.commonConfig&&"string"==typeof e.commonConfig.brand)return e.commonConfig.brand;return""}();return{[N]:e}}function k(){return function(){const e=M();if(e&&e.consentPolicyManager&&"function"==typeof e.consentPolicyManager._getConsentPolicyHeader)return e.consentPolicyManager._getConsentPolicyHeader();return}()||function(){const e=M();if(e&&e.Wix&&e.Wix.Utils&&"function"==typeof e.Wix.Utils._getConsentPolicyHeader)return e.Wix.Utils._getConsentPolicyHeader();return}()||{}}var q=n(184);function W(){return void 0!==q&&null!=q.versions?.node}function j(e){const t=W()?"media-frame":"";return{"X-Wix-Client-Artifact-Id":e??(W()&&(q.env.TEAMCITY_VERSION||q.env.BUILDKITE)?"":t)}}const D=["consentPolicy","consentPolicyHeader"],L={bsi:"BSI"};const $=()=>{const e=function(){const e=M(),t=e?.commonConfig;if(!t)return null;const n={};let r=!1;return Object.keys(t).forEach((e=>{const o=L[e];o?(n[o]=t[e],r=!0):D.indexOf(e)<0&&"function"!=typeof t[e]&&(n[e]=t[e],r=!0)})),r?n:null}(),t=e?JSON.stringify(e):"";return{commonConfig:encodeURIComponent(t)}};var F=n(254),G=n.n(F);const V="x-wix-linguist";function H({lang:e,locale:t,isPrimaryLanguage:n,signedInstance:r}){if(function({lang:e,locale:t,isPrimaryLanguage:n}){return e&&t&&/^(true|false)$/.test(n?.toString()||"")}({lang:e,locale:t,isPrimaryLanguage:n})){const o=function(e){try{const t=e?.startsWith("wixcode")?e?.split(".")[2]:e?.split(".")[1];if(t)return JSON.parse(G().decode(t)).instanceId}catch(e){}}(r);if(void 0!==o)return{[V]:[e,t,n?.toString(),o].join("|")}}return{}}Error;class J extends Error{constructor(e,t,n){super(`WixHeadersValidationError: expected ${t} to be ${e} but got ${JSON.stringify(n)}`)}}function X(e={}){!function(e){(function(e,t){if("boolean"!=typeof t)throw new J("boolean",e,t)})("opts.csrf",e.csrf),function(e,t){if("string"!=typeof t)throw new J("string",e,t)}("opts.signedInstance",e.signedInstance)}(e={csrf:!0,signedInstance:"",...e});const t=[R(),k(),(n=e.signedInstance,{authorization:n}),j(e.artifactId),$(),H({signedInstance:e.signedInstance,...e.multilingualOptions})];var n;return e.csrf&&t.push(function(){const e=T(P);return{[U]:e}}()),t.filter((e=>Object.values(e).every((e=>e)))).reduce(((e,t)=>({...e,...t})),{})}var B=function(){function e(e){var t;this.experiments=null!==(t=e.experiments)&&void 0!==t?t:{}}return e.prototype.get=function(e){return this.experiments[e]},e.prototype.enabled=function(e){return"true"===this.get(e)},e.prototype.pending=function(){return!1},e.prototype.ready=function(){return Promise.resolve()},e.prototype.all=function(){return this.experiments},e}(),K=function(){},z=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this,r=a(a(a(a({},m("useNewApi",d,"boolean")),m("conductionMethod",h,y)),m("siteOwnerId",p,"string")),m("loggedInUserId",g,"string"));return n.useNewApi=void 0!==t.useNewApi?t.useNewApi:r.useNewApi||!1,n.experiments=t.experiments||{},n.loaders=new Map,n.baseUrl=(n.useNewApi,t.baseUrl||""),n.requestContext=t.requestContext||v(r),n.onError=t.onError||K,t.scope&&n.load(t.scope),t.scopes&&t.scopes.forEach(n.load.bind(n)),n}return s(t,e),t.prototype.add=function(e){this.experiments=a(a({},this.experiments),e)},t.prototype._addLoader=function(e,t){var n=this;return this.loaders.set(e,t),t.then((function(){n.loaders.delete(e)})),t},t.prototype._getUrlWithFallback=function(e,t){var n=this,r=A().getUrlResponse(e);if(void 0!==r)return Promise.resolve(r);var o=A().getUrlRequest(e);if(void 0!==o)return o;var i=this.loaders.get(e);if(void 0!==i)return i;var s=function(e){return new Promise((function(t,n){var r=X(),o=new XMLHttpRequest;o.open("GET",e,!0),Object.keys(r).forEach((function(e){return o.setRequestHeader(e,r[e])})),o.responseType="text",o.withCredentials=!0,o.onload=function(){o.status>=200&&o.status<400?t(o.responseText):n(new Error("Failed to load ".concat(e,", status ").concat(o.status)))},o.onerror=function(){return n(new Error("Failed to load ".concat(e)))},o.send()}))}(e).catch((function(e){return n.onError(e),t}));return A().addUrlRequest(e,s),s},t.prototype.load=function(e){var t=this,n=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=!1),t?"".concat(x.conductAllInScope,"?scope=").concat(encodeURIComponent(e)):"".concat(O.conductAllInScope,"?scope=").concat(encodeURIComponent(e))}(e,this.useNewApi),r=this.useNewApi?b(this.requestContext):"",o="".concat(this.baseUrl).concat(n).concat(r),i=this._getUrlWithFallback(o,"{}").then((function(e){return I(e)})).then((function(e){return t.useNewApi?e.values:e})).then((function(e){return t.add(e),e}));return this._addLoader(o,i)},t.prototype.conduct=function(e,t){var n=this,r=A().getExperimentValue(e,this.useNewApi);if(void 0!==r)return this._addConductResult(e,r);var o=_(e,t,this.useNewApi),i=this.useNewApi?b(this.requestContext):"",s="".concat(this.baseUrl).concat(o).concat(i),a=this._getUrlWithFallback(s,null!=t?t:"").then((function(t){return n._addConductResult(e,t)}));return this._addLoader(s,a)},t.prototype.pending=function(){return!!this.loaders.size},t.prototype.ready=function(){return Promise.all(Array.from(this.loaders.values()))},t.prototype._addConductResult=function(e,t){var n,r=this.useNewApi?JSON.parse(t).value:t;return this.add(((n={})[e]=r,n)),Promise.resolve(r)},t}(B);const Y=e=>{const t=function(){let e="";return window.consentPolicyManager&&(e=Object.entries(window.consentPolicyManager._getConsentPolicyHeader()).reduce(((e,t)=>{let[n,r]=t;return[...e,`${n}=${r}`]}),[]).join("&")),e}(),n=window.commonConfig?encodeURIComponent(JSON.stringify(window.commonConfig)):void 0,r=n?`&commonConfig=${n}`:"",o=function(e){const t=document.createElement("a");return t.href=e,t.href}(`${e.mediaGalleryBaseHost}index.html?locale=${e.i18nCode}${t?`&${t}`:""}${r}`);if(e.siteMediaToken){return`${o}&msid=${(e=>{const t=e?e.split(".")[2]:null,n=t?atob(t):"{}";try{const e=JSON.parse(n);return JSON.parse(e.data)}catch(e){return{}}})(e.siteMediaToken||"").metasiteId}`}if(e.metaSiteToken){return`${o}&msid=${(e=>{const t=e?e.split(".")[1]:null,n=t?atob(t):"{}";try{return JSON.parse(n)}catch(e){return{}}})(e.metaSiteToken||"").metaSiteId}`}return o};const Z="specs.media-manager-g6.WixSession3";class Q{constructor(e){this.logger=e,this.iframe=void 0,this.messenger=new o,this.experiments=void 0,this.handleConsentPolicyChanged=()=>{if(!window.consentPolicyManager)return;const e=window.consentPolicyManager.getCurrentConsentPolicy().policy;this.messenger.emit("consentPolicyChanged",e)},this.experiments=new z,this.experiments.conduct(Z,"false")}getMessenger(){return this.messenger}async show(e,t){let{displayOnReady:n}=t;await this.experiments.ready();const r=this.experiments.enabled(Z),o=Y({...e,mediaGalleryBaseHost:r?`${location.origin}/media-manager/g6/`:e.mediaGalleryBaseHost});return this.iframe&&this.iframe.src===o?this.sendSettings(e).then((()=>{n&&this.showIframe()})):this.createIframe({appendTo:e.appendTo,src:o}).then((()=>this.show(e,{displayOnReady:n})))}hide(){this.iframe&&(this.messenger.emit("empty"),this.hideIframe())}kill(){this.iframe&&this.iframe.parentNode&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=void 0,document.removeEventListener("consentPolicyChanged",this.handleConsentPolicyChanged),this.logger.log("iFrame killed"))}sendSettings(e){return this.messenger.emit("settings",e),t=new Promise((e=>{this.messenger.one("settingsReady",(()=>(this.logger.log("iFrame settings are applied"),e())))})),Promise.race([t,new Promise((e=>setTimeout((()=>e(void 0)),1500)))]);var t}createIframe(e){let{appendTo:t="body",src:n}=e;this.iframe&&this.kill(),this.iframe=document.createElement("iframe"),this.iframe.id="mediaGalleryFrame",this.iframe.style.border="none",this.hideIframe(),this.iframe.src=n;const r=document.querySelector(t);if(!r)throw new Error(`Cannot find element by selector '${t}'`);return r.appendChild(this.iframe),this.logger.log("iFrame created",this.iframe),this.iframe.contentWindow&&this.messenger.setTarget(this.iframe.contentWindow),document.addEventListener("consentPolicyChanged",this.handleConsentPolicyChanged),new Promise((e=>{this.messenger.one("ready",(()=>{this.logger.log("iFrame is ready"),e()}))}))}hideIframe(){this.iframe&&(this.iframe.style.display="none")}showIframe(){this.iframe&&(this.iframe.style.display="block",this.iframe.contentWindow&&this.iframe.contentWindow.focus())}}class ee{constructor(t){this.defaultSettings=t,this.version=window.__CI_APP_VERSION__,this.iframeManager=void 0,this.messenger=void 0,this.logger=new e("MediaFrame"),this.iframeManager=new Q(this.logger),this.messenger=this.iframeManager.getMessenger(),this.on("close",this.close.bind(this)),this.on("items",this.close.bind(this))}on(e,t){return this.messenger.on(e,t),this}one(e,t){return this.messenger.one(e,t),this}off(e,t){return this.messenger.off(e,t),this}open(e){return e=this.__mergeDefaultSettings(e),this.logger.log("show with settings",e),this.iframeManager.show(e,{displayOnReady:!0}),this}warmup(e){const t=this.__mergeDefaultSettings({siteMediaToken:null,...e,path:"empty"});return this.iframeManager.show(t,{displayOnReady:!1}),this}close(){return this.iframeManager.hide(),this}kill(){this.iframeManager.kill()}empty(){return this.messenger.emit("empty"),this}__mergeDefaultSettings(e){if((e={...this.defaultSettings,...e}).versionDefaults&&e.version&&!e.versionDefaults.hasOwnProperty(e.version)){const t=Object.keys(e.versionDefaults);throw new Error(`Invalid version. It should be one of ${t.join(" | ")}`)}return{...e.versionDefaults&&e.version?e.versionDefaults[e.version]:{},...e}}}let te=function(e){return e.G5="G5",e.G6="G6",e}({});window.addEventListener("keydown",t,!1);const ne=new ee({version:te.G6,versionDefaults:{[te.G6]:{mediaGalleryBaseHost:`https://${-1!==location.hostname.indexOf("editorx.com")?"manage.editorx.com":"manage.wix.com"}/media-manager/g6/`}}});"undefined"==typeof window||window.MediaFrame||(window.MediaFrame=ne)})()})();
//# sourceMappingURL=MediaFrame.bundle.min.js.map